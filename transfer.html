<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pay Naija - Transfer</title>
    <link rel='icon' href='img/PayNaija.png' type='image/x-icon' sizes="16x16" />
      <!-- Import Google font and icons -->
      <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
      <link href="https://fonts.googleapis.com/css?family=Work+Sans:400,700&display=swap" rel="stylesheet">
	  <link rel="stylesheet" href="bootstrap-4.5.0-dist/css/bootstrap.min.css">
      <link href="style.css" rel="stylesheet">
	  <link href="https://cdn.materialdesignicons.com/4.8.95/css/materialdesignicons.min.css" rel="stylesheet">
	  <link rel="stylesheet" href="iziToast-master/dist/css/iziToast.min.css">
</head>
<body>
    
    <!-- Navigation bar -->
    <div class="navigation-wrap bg-light start-header start-style">
		<div class="container">
			<div class="row">
				<div class="col-12">
					<nav class="navbar navbar-expand-md navbar-light">
					
						<a class="navbar-brand" href="home.html"><img src="img/PayNaija.png" alt="logo" width="100" height="50" /></a>	
						
						<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
							<span class="navbar-toggler-icon"></span>
						</button>
						
						<div class="collapse navbar-collapse" id="navbarSupportedContent">
							<ul class="navbar-nav ml-auto py-4 py-md-0">
								<li class="nav-item pl-4 pl-md-0 ml-0 ml-md-4 active">
									<a class="nav-link" href="home.html" role="button" aria-haspopup="true" aria-expanded="false">Home</a>
								</li>
								<li class="nav-item pl-4 pl-md-0 ml-0 ml-md-4">
									<a class="nav-link" href="transfer_amount.html">Transfer</a>
								</li>
								<li class="nav-item pl-4 pl-md-0 ml-0 ml-md-4">
									<a class="nav-link" href="contact.html">Contact</a>
                                </li>
                                <li class="nav-item pl-4 pl-md-0 ml-0 ml-md-4">
									<a class="nav-link" style="cursor: pointer;" onclick="markRead()">
                                        <span class="count" id="notifications-count"></span>
                                        <i class="mdi mdi-bell" style="font-size: 20px;"></i></a>
                                </li>
                                <li class="nav-item pl-4 pl-md-0 ml-0 ml-md-4">
									<a class="nav-link" href="logout.html">Logout</a>
								</li>
								 <li class="pl-4 pl-md-0 ml-0 ml-md-4 mt-1">
                                    <p id="fullName">Welcome, </p>
                                </li>
                                
							</ul>
						</div>
						
					</nav>		
				</div>
			</div>
        </div>

    </div>

    
        <!-- main page design layout -->
        <div class="container" style="margin-top: 100px;">

			<h5>Start a transaction by filling the recipient's details below.</h5>

			<form>
				<!-- first row -->
				<div class="row mt-4">
					<div class="col-sm-12 col-lg-8">
						<!-- first row -->
						<div class="row">
							<div class="col-sm-12 col-lg-6">
								<div class="form-group">
									<label for="firstName">First Name</label>
									<input type="text" class="form-control" id="firstName" required>
								  </div>
							</div>
							<div class="col-sm-12 col-lg-6">
								<div class="form-group">
									<label for="lastName">Last Name</label>
									<input type="text" class="form-control" id="lastName" required>
								  </div>
							</div>
						</div>
						<!-- second row -->
						<div class="row">
							<div class="col-sm-12 col-lg-6">
								<div class="form-group">
									<label for="middleName">Middle Name</label>
									<input type="text" class="form-control" id="middleName" required>
								  </div>
							</div>
							<div class="col-sm-12 col-lg-6">
								<div class="form-group">
									<label for="country">Country</label>
									<select class="form-control" id="country">
										<option value="Algeria">Algeria</option>
										<option value="Angola">Angola</option>
										<option value="Benin">Benin</option>
										<option value="Botswana">Botswana</option>
										<option value="Burkina Faso">Burkina Faso</option>
										<option value="Burundi">Burundi</option>
										<option value="Cabo Verde">Cabo Verde</option>
										<option value="Cameroon">Cameroon</option>
										<option value="Central African Republic (the)">Central African Republic (the)</option>
										<option value="Chad">Chad</option><option value="Comoros ">Comoros </option>
										<option value="Congo">Congo</option>
										<option value="Congo (the)">Congo (the)</option>
										<option value="Côte d'ivoire">Côte d'Ivoire</option>
										<option value="Djibouti">Djibouti</option>
										<option value="Egypt">Egypt</option>
										<option value="Equatorial Guinea">Equatorial Guinea</option>
										<option value="Eritrea">Eritrea</option>
										<option value="Ethiopia">Ethiopia</option>
										<option value="Gabon">Gabon</option>
										<option value="Gambia ">Gambia </option>
										<option value="Ghana">Ghana</option>
										<option value="Guinea">Guinea</option>
										<option value="Guinea-Bissau">Guinea-Bissau</option>
										<option value="Kenya">Kenya</option>
										<option value="Lesotho">Lesotho</option>
										<option value="Liberia">Liberia</option>
										<option value="Libya">Libya</option>
										<option value="Madagascar">Madagascar</option>
										<option value="Malawi">Malawi</option>
										<option value="Mali">Mali</option>
										<option value="Mauritania">Mauritania</option>
										<option value="Mauritius">Mauritius</option>
										<option value="Mayotte">Mayotte</option>
										<option value="Morocco">Morocco</option>
										<option value="Mozambique">Mozambique</option>
										<option value="Namibia">Namibia</option>
										<option value="Niger (the)">Niger (the)</option>
										<option value="Nigeria">Nigeria</option>
										<option value="Réunion">Réunion</option>
										<option value="Rwanda">Rwanda</option>
										<option value="Saint Helena, Ascension and Tristan da Cunha">Saint Helena, Ascension and Tristan da Cunha</option>
										<option value="Sao Tome and Principe">Sao Tome and Principe</option>
										<option value="Senegal">Senegal</option>
										<option value="Seychelles">Seychelles</option>
										<option value="Sierra Leone">Sierra Leone</option>
										<option value="Somalia">Somalia</option>
										<option value="South Africa">South Africa</option>
										<option value="South Sudan">South Sudan</option>
										<option value="Sudan ">Sudan </option>
										<option value="Swaziland">Swaziland</option>
										<option value="Tanzania, United Republic of">Tanzania, United Republic of</option>
										<option value="Togo">Togo</option><option value="Tunisia">Tunisia</option>
										<option value="Uganda">Uganda</option><option value="Western Sahara*">Western Sahara*</option>
										<option value="Zambia">Zambia</option>
										<option value="Zimbabwe">Zimbabwe</option>
										<option value="Antarctica">Antarctica</option>
										<option value="Bouvet Island">Bouvet Island</option>
										<option value="French Southern Territories (the)">French Southern Territories (the)</option>
										<option value="Heard Island and McDonald Islands">Heard Island and McDonald Islands</option>
										<option value="South Georgia and the South Sandwich Islands">South Georgia and the South Sandwich Islands</option>
										<option value="Afghanistan">Afghanistan</option><option value="Armenia">Armenia</option>
										<option value="Azerbaijan">Azerbaijan</option><option value="Bangladesh">Bangladesh</option>
										<option value="Bhutan">Bhutan</option>
										<option value="British Indian Ocean Territory (the)">British Indian Ocean Territory (the)</option>
										<option value="Brunei Darussalam">Brunei Darussalam</option><option value="Cambodia">Cambodia</option>
										<option value="China">China</option><option value="Georgia">Georgia</option><option value="Hong Kong">Hong Kong</option>
										<option value="India">India</option><option value="Indonesia">Indonesia</option><option value="Japan">Japan</option>
										<option value="Kazakhstan">Kazakhstan</option>
										<option value="Korea">Korea (the Republic of)</option>
										<option value="Kyrgyzstan">Kyrgyzstan</option>
										<option value="Lao People">Lao People's Democratic Republic (the)</option>
										<option value="Macao">Macao</option><option value="Malaysia">Malaysia</option><option value="Maldives">Maldives</option>
										<option value="Mongolia">Mongolia</option><option value="Myanmar">Myanmar</option><option value="Nepal">Nepal</option>
										<option value="Pakistan">Pakistan</option><option value="Philippine">Philippines</option>
										<option value="Singapore">Singapore</option><option value="Sri Lanka">Sri Lanka</option>
										<option value="Vietnam">Vietnam</option><option value="Taiwan (Province of China)">Taiwan (Province of China)</option>
										<option value="Belize">Belize</option><option value="Tajikistan">Tajikistan</option>
										<option value="Thailand">Thailand</option><option value="Timor-Leste">Timor-Leste</option>
										<option value="Turkmenistan">Turkmenistan</option>
										<option value="Uzbekistan">Uzbekistan</option>
									</select>
								  </div>
							</div>
						</div>

						<!-- third row -->
						<div class="row">
							<div class="col-sm-12 col-lg-6">
								<div class="form-group">
									<label for="state">State</label>
									<input type="text" class="form-control" id="state" required>
								</div>
							</div>
							<div class="col-sm-12 col-lg-6">
								<div class="form-group">
									<label for="zip">Zip Code</label>
									<input type="text" class="form-control" id="zip" required>
								  </div>
							</div>
						</div>

						<!-- fourth row -->
						<div class="row">
							<div class="col-sm-12 col-lg-6">
								<div class="form-group">
									<label for="phone">Phone No</label>
									<input type="text" class="form-control" id="phone" required>
								  </div>
							</div>
							<div class="col-sm-12 col-lg-6">
								<div class="form-group">
									<label for="address">Address</label>
									<input type="text" class="form-control" id="address" required>
								  </div>
							</div>
						</div>

						<!-- fifth row -->
						<div class="row">
							<div class="col-sm-12 col-lg-6">
								<div class="form-group">
									<label for="email">Email</label>
									<input type="email" class="form-control" id="email" required>
								  </div>
							</div>
							<div class="col-sm-12 col-lg-6">
								<div class="form-group">
									<label for="accountName">Account Name</label>
									<input type="text" class="form-control" id="accountName" required>
								  </div>
							</div>
						</div>

						<!-- sixth row -->
						<div class="row">
							<div class="col-sm-12 col-lg-6">
								<div class="form-group">
									<label for="accountNumber">Account Number</label>
									<input type="text" class="form-control" id="accountNumber" required>
								  </div>
							</div>
							<div class="col-sm-12 col-lg-6">
								<div class="form-group">
									<label for="bank">Bank Name</label>
									<input type="text" class="form-control" id="bank" required>
								  </div>
							</div>
						</div>


					</div>
					<div class="col-sm-12 col-lg-4">
						<div class="card mb-3">
							<div class="card-body">
								<h6 class="card-title text-center icon-color">Amount to Transfer (Naira)</h6>
								 <p class="card-text text-center mt-2 nairaAmount" style="font-size: 30px;">&#8358;</p>
							</div>
						  </div>
					</div>
				</div>
				

			

				<div class="mb-4">
					<button type="submit" class="btn btn-primary mt-2">Submit <span id="spinner"></span></button>
				</div>
				

			</form>
			   
		</div>
		
		 <!-- footer design -->
		 <footer style="background: #333333; padding-bottom: 20px;" class="mt-5">

			<div class="container pt-5">
				<div class="row">
					<div class="col-lg-4 col-sm-12">
						<h6 style="color: white;">Our Information</h6>
						<p style="color: white; font-size: 13px;" >7321 N Paulina St, Chicago, IL. 60626.</p>
					</div>
	
					<div class="col-lg-4 col-sm-12">
							<h6 style="color: white;">Our Correspondence</h6>
							<p style="color: white; font-size: 13px;">+1 (312) 774-9047</p>
					</div>
					<div class="col-lg-4 col-sm-12">
							<h6 style="color: white;">Connect with us.</h6>
							<ul style="display: flex; list-style: none;">
								<li><a href="#" style="color: white;"><i class="fab fa-twitter"></i></a></li>
								<li style="margin-left: 20px;"><a href="#" style="color: white;"><i class="fab fa-facebook"></i></a></li>
								<li style="margin-left: 20px;"><a href="#" style="color: white;"><i class="fab fa-instagram"></i></a></li>
								<li style="margin-left: 20px;"><a href="mailto:seyiekundayo879@gmail.com" style="color: white;"><i class="mdi mdi-email"></i></a></li>
							</ul>
					</div>
				</div>
			</div>
			
			
			<div class="container mt-3 text-center">
				<p style="color: white; font-size: 14px;">&copy; All rights Reserved PayNaija 2020.</p>
				<p style="color: white; font-size: 14px;">Developed by Hayroyal Consult</p>   
			</div>
		</footer>

      
    







<script src="dist/jquery.min.js"></script>
<script src="bootstrap-4.5.0-dist/js/bootstrap.min.js"></script>
<script src="lib/viewdata.js"></script>
<script src="lib/jquery.cookie.js"></script>
<script src="https://kit.fontawesome.com/d54c227c34.js"></script>
	<!-- Forms Validations Plugin -->
<script src="/assets/js/plugins/jquery.validate.min.js"></script>
<script src="iziToast-master/dist/js/iziToast.min.js"></script>
  <script>
    $(document).ready(function(){

		var view_data = new ViewData();
		var fullName = view_data.getStoredUserDetail('fullName');
		var token = view_data.getStoredUserDetail("token"); 

        $('#fullName').append(fullName)

		  // to get the query string parameters from the url
		  var nairaValue;
        var dollarValue;
        var query = window.location.search.substring(1);
        var parms = query.split('&');
        parms.forEach(function(e) {
            var keyValue = e.split("=");
            var key = keyValue[0];
            var value = keyValue[1];
            if(key === 'naira-amount') {
                // console.log(value);
                nairaValue = value;
            }
            else if(key === 'dollar-amount'){
                // console.log(value);
            dollarValue = value
            }
		})

		console.log(nairaValue)
		console.log(dollarValue)

		$('.nairaAmount').append(nairaValue)
        


		$('body').on('mouseenter mouseleave','.nav-item',function(e){
			if ($(window).width() > 750) {
				var _d=$(e.target).closest('.nav-item');_d.addClass('show');
				setTimeout(function(){
				_d[_d.is(':hover')?'addClass':'removeClass']('show');
				},1);
			}
		});
		
		  // Generic dashboard details
		  var notification = "notification";
          var notificationsUrl = view_data.ControllerRouteURL + notification;
        $.ajax({
                url: notificationsUrl,
                type: "GET",
                dataType: 'json',
                data: false,
                contentType: false,
                      cache: false,
                processData:false,
                beforeSend : function(jqXHR, settings)
                {
                  jqXHR.setRequestHeader('Authorization',token);
                },
                success: function(data)
                {
                    console.log(data);
                    var length = data.unReadLength
                    $('#notifications-count').text(length)
                   
                },
                complete: function(jqXHR){
                      if(jqXHR.status == '401'){
                        alert("Session expired, Kindly login again to continue");
                        window.location.replace("logout.html");
                          }
                  } 
          })


	// 	// Api request to get all countries
	// 	var view_data = new ViewData();
    //     var countryUrl = view_data.CountriesURL;

    //   $.ajax({
    //             url: countryUrl,
    //             type: "GET",
    //             dataType: 'json',
    //             data: false,
    //             contentType: false,
    //                   cache: false,
    //             processData:false,
    //             beforeSend : function(jqXHR, settings)
    //             {

    //             },
    //             success: function(data)
    //             {
	// 				var country = data.data
	// 				console.log(country)
	// 				for(var i in country){
	// 				var myCountry = country[i]['country']; //alerts key's value
	// 				$("select#country").append("<option value='"+myCountry+"'>"+myCountry+"</option>");
	// 				}
    //             },
    //             complete: function(jqXHR){
	// 				if (jqXHR.status != '200') {
    //                   var obj = $.parseJSON(jqXHR.responseText);
    //               	 }
    //              }  
    //       })
		
	
		// on form submit
        $("form").submit(function(event) {
			event.preventDefault()

			var view_data = new ViewData();
         	 var send_function = "payment";
			var url = view_data.ControllerRouteURL + send_function;
			var token = view_data.getStoredUserDetail("token");

          var fName = $("#firstName").val();
          var lName = $("#lastName").val();
          var mName = $('#middleName').val();
          var country = $('select#country option:selected').val();
          var state = $('#state').val();
          var stateZipCode = $('#zip').val();
          var phoneNo = $('#phone').val();
          var address = $('#address').val();
          var email = $('#email').val();
          var accountNumber = $('#accountNumber').val();
          var accountName = $('#accountName').val();
          var bankName = $('#bank').val();
         

          var data = {
            fName: fName,
            lName: lName,
            mName: mName,
            country: country,
			state: state,
			stateZipCode: stateZipCode,
			phoneNo: phoneNo,
			address: address,
			email: email,
			accountNumber: accountNumber,
			accountName: accountName,
			bankName: bankName,
			amountNaira: nairaValue,
			amountDollar: dollarValue
          }

          $.ajax({
                type: 'POST',
                data: JSON.stringify(data),
                url: url,
                contentType: "application/json; charset=utf-8",
                dataType: 'json',
              beforeSend: function(jqXHR, settings) {
				jqXHR.setRequestHeader('Authorization',token);
                  $('#spinner').addClass("fa fa-circle-o-notch fa-spin");
              },
              success: function(data) {
				console.log(data)
				
                iziToast.success({
                    message: 'Transfer Successful, Kindly contact the admin to Proceed with your payments.',
                    progressBar: false,
                    position: 'topRight'
                });

                $("#firstName").val('');
				$("#lastName").val('');
				$('#middleName').val('');
				$('#state').val('');
				$('#zip').val('');
				$('#phone').val('');
				$('#address').val('');
				$('#email').val('');
				$('#accountNumber').val('');
				$('#accountName').val('');
				$('#bank').val('');

              },
              error: function(data){
                  $('#spinner').removeClass("fa fa-circle-o-notch fa-spin");  
                  iziToast.error({
                    message: 'Server not available! Please try again later.',
                    progressBar: false,
                    position: 'topRight'
                });

              },
              complete: function(jqXHR) {
				if(jqXHR.status == '401'){
                        alert("Session expired! Please login again.");
                        window.location.replace("logout.html");
                     }
                  $('#spinner').removeClass("fa fa-circle-o-notch fa-spin");
              }
          })
			
		})
		
	})  
	
	function markRead(){
        var view_data = new ViewData();
        var token = view_data.getStoredUserDetail("token"); 

        var count = parseInt($('#notifications-count').text())
        console.log(count)

        if(count === 0){
            window.location.replace("notifications.html"); 
        }else{
            var read = "markread";
            var readUrl = view_data.ControllerRouteURL + read;
            $.ajax({
                    url: readUrl,
                    type: "POST",
                    dataType: 'json',
                    data: false,
                    contentType: false,
                        cache: false,
                    processData:false,
                    beforeSend : function(jqXHR, settings)
                    {
                    jqXHR.setRequestHeader('Authorization',token);
                    },
                    success: function(data)
                    {
                        console.log(data);
                        window.location.replace("notifications.html");
                    },
                    complete: function(jqXHR){
                        if(jqXHR.status == '401'){
                            alert("Session expired, Kindly login again to continue");
                            window.location.replace("logout.html");
                            }
                    } 
            })
        }
         
    }
  </script> 
</body>
</html>