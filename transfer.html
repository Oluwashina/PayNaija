<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pay Naija - Transfer</title>
    <link rel='icon' href='img/PayNaija.png' type='image/x-icon' sizes="16x16" />
      <!-- Import Google font and icons -->
      <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
      <link href="https://fonts.googleapis.com/css?family=Work+Sans:400,700&display=swap" rel="stylesheet">
	  <link rel="stylesheet" href="bootstrap-4.5.0-dist/css/bootstrap.min.css">
      <link href="style.css" rel="stylesheet">
	  <link href="https://cdn.materialdesignicons.com/4.8.95/css/materialdesignicons.min.css" rel="stylesheet">
	  <link rel="stylesheet" href="iziToast-master/dist/css/iziToast.min.css">
</head>
<body>
    
    <!-- Navigation bar -->
    <div class="navigation-wrap bg-light start-header start-style">
		<div class="container">
			<div class="row">
				<div class="col-12">
					<nav class="navbar navbar-expand-md navbar-light">
					
						<a class="navbar-brand" href="home.html"><img src="img/PayNaija.png" alt="logo" width="100" height="50" /></a>	
						
						<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
							<span class="navbar-toggler-icon"></span>
						</button>
						
						<div class="collapse navbar-collapse" id="navbarSupportedContent">
							<ul class="navbar-nav ml-auto py-4 py-md-0">
								<li class="nav-item pl-4 pl-md-0 ml-0 ml-md-4 active">
									<a class="nav-link" href="home.html" role="button" aria-haspopup="true" aria-expanded="false">Home</a>
								</li>
								<li class="nav-item pl-4 pl-md-0 ml-0 ml-md-4">
									<a class="nav-link" href="#">Transfer</a>
								</li>
								<li class="nav-item pl-4 pl-md-0 ml-0 ml-md-4">
									<a class="nav-link" href="contact.html">Contact</a>
								</li>
								<li class="nav-item pl-4 pl-md-0 ml-0 ml-md-4">
									<a class="nav-link" href="logout.html">Logout</a>
								</li>
							</ul>
						</div>
						
					</nav>		
				</div>
			</div>
        </div>

    </div>

    
        <!-- main page design layout -->
        <div class="container" style="margin-top: 100px;">

			<h5>Start a transaction by filling the recipient's details below.</h5>

			<form>
				<!-- first row -->
				<div class="row mt-4">
					<div class="col-sm-12 col-lg-4">
						<div class="form-group">
							<label for="firstName">First Name</label>
							<input type="text" class="form-control" id="firstName" required>
						  </div>
					</div>

					<div class="col-sm-12 col-lg-4">
						<div class="form-group">
							<label for="lastName">Last Name</label>
							<input type="text" class="form-control" id="lastName" required>
						  </div>
					</div>
				</div>

				<!-- second row -->
				<div class="row">
					<div class="col-sm-12 col-lg-4">
						<div class="form-group">
							<label for="middleName">Middle Name</label>
							<input type="text" class="form-control" id="middleName" required>
						  </div>
					</div>

					<div class="col-sm-12 col-lg-4">
						<div class="form-group">
							<label for="country">Country</label>
							<select class="form-control" id="country">
							 
							</select>
						  </div>
					</div>
				
				</div>

				<!-- third row -->
				<div class="row">
					<div class="col-sm-12 col-lg-4">
						<div class="form-group">
							<label for="state">State</label>
							<input type="text" class="form-control" id="state" required>
						  </div>
					</div>

					<div class="col-sm-12 col-lg-4">
						<div class="form-group">
							<label for="zip">Zip Code</label>
							<input type="text" class="form-control" id="zip" required>
						  </div>
					</div>
				</div>

				<!-- fourth row -->
				<div class="row">
					<div class="col-sm-12 col-lg-4">
						<div class="form-group">
							<label for="phone">Phone No</label>
							<input type="text" class="form-control" id="phone" required>
						  </div>
					</div>

					<div class="col-sm-12 col-lg-4">
						<div class="form-group">
							<label for="address">Address</label>
							<input type="text" class="form-control" id="address" required>
						  </div>
					</div>
				</div>

				<!-- fifth row -->
				<div class="row">
					<div class="col-sm-12 col-lg-4">
						<div class="form-group">
							<label for="email">Email</label>
							<input type="email" class="form-control" id="email" required>
						  </div>
					</div>

					<div class="col-sm-12 col-lg-4">
						<div class="form-group">
							<label for="accountName">Account Name</label>
							<input type="text" class="form-control" id="accountName" required>
						  </div>
					</div>
				</div>

				<!-- sixth row -->
				<div class="row">
					<div class="col-sm-12 col-lg-4">
						<div class="form-group">
							<label for="accountNumber">Account Number</label>
							<input type="text" class="form-control" id="accountNumber" required>
						  </div>
					</div>

					<div class="col-sm-12 col-lg-4">
						<div class="form-group">
							<label for="bank">Bank Name</label>
							<input type="text" class="form-control" id="bank" required>
						  </div>
					</div>
				</div>

				<div class="mb-4">
					<button type="submit" class="btn btn-primary mt-2">Submit <span id="spinner"></span></button>
				</div>
				

			</form>
			
           
            
        </div>

      
    







<script src="dist/jquery.min.js"></script>
<script src="bootstrap-4.5.0-dist/js/bootstrap.min.js"></script>
<script src="lib/viewdata.js"></script>
<script src="lib/jquery.cookie.js"></script>
<script src="https://kit.fontawesome.com/d54c227c34.js"></script>
	<!-- Forms Validations Plugin -->
<script src="/assets/js/plugins/jquery.validate.min.js"></script>
<script src="iziToast-master/dist/js/iziToast.min.js"></script>
  <script>
    $(document).ready(function(){



		// Api request to get all countries
		var view_data = new ViewData();
        var countryUrl = view_data.CountriesURL;

      $.ajax({
                url: countryUrl,
                type: "GET",
                dataType: 'json',
                data: false,
                contentType: false,
                      cache: false,
                processData:false,
                beforeSend : function(jqXHR, settings)
                {

                },
                success: function(data)
                {
					var country = data.data
					console.log(country)
					for(var i in country){
					var myCountry = country[i]['country']; //alerts key's value
					$("select#country").append("<option value='"+myCountry+"'>"+myCountry+"</option>");
					}
                },
                complete: function(jqXHR){
					if (jqXHR.status != '200') {
                      var obj = $.parseJSON(jqXHR.responseText);
                  	 }
                 }  
          })
		
		// on form submit
        $("form").submit(function(event) {
			event.preventDefault()

			var view_data = new ViewData();
         	 var send_function = "payment";
			var url = view_data.ControllerRouteURL + send_function;
			var token = view_data.getStoredUserDetail("token");

          var fName = $("#firstName").val();
          var lName = $("#lastName").val();
          var mName = $('#middleName').val();
          var country = $('select#country option:selected').val();
          var state = $('#state').val();
          var stateZipCode = $('#zip').val();
          var phoneNo = $('#phone').val();
          var address = $('#address').val();
          var email = $('#email').val();
          var accountNumber = $('#accountNumber').val();
          var accountName = $('#accountName').val();
          var bankName = $('#bank').val();
         

          var data = {
            fName: fName,
            lName: lName,
            mName: mName,
            country: country,
			state: state,
			stateZipCode: stateZipCode,
			phoneNo: phoneNo,
			address: address,
			email: email,
			accountNumber: accountNumber,
			accountName: accountName,
			bankName: bankName
          }

          $.ajax({
                type: 'POST',
                data: JSON.stringify(data),
                url: url,
                contentType: "application/json; charset=utf-8",
                dataType: 'json',
              beforeSend: function(jqXHR, settings) {
				jqXHR.setRequestHeader('Authorization',token);
                  $('#spinner').addClass("fa fa-circle-o-notch fa-spin");
              },
              success: function(data) {
                console.log(data)
                iziToast.success({
                    message: 'Successful, Kindly contact the admin to Proceed with your payments',
                    progressBar: false,
                    position: 'topRight'
                });

                $("#firstName").val();
				$("#lastName").val();
				$('#middleName').val();
				$('select#country option:selected').val();
				$('#state').val();
				$('#zip').val();
				$('#phone').val();
				$('#address').val();
				$('#email').val();
				$('#accountNumber').val();
				$('#accountName').val();
				$('#bank').val();

              },
              error: function(data){
                  $('#spinner').removeClass("fa fa-circle-o-notch fa-spin");  
                  iziToast.error({
                    message: 'Invalid Input',
                    progressBar: false,
                    position: 'topRight'
                });

              },
              complete: function(jqXHR) {
                  if (jqXHR.status != '200') {
                      var obj = $.parseJSON(jqXHR.responseText);
                  }
                  $('#spinner').removeClass("fa fa-circle-o-notch fa-spin");
              }
          })
			
		})


    })  
  </script> 
</body>
</html>