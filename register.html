<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pay Naija - Register</title>
    <link rel='icon' href='img/PayNaija.png' type='image/x-icon' sizes="16x16" />
      <!-- Import Google font and icons -->
      <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
      <link href="https://fonts.googleapis.com/css?family=Work+Sans:400,700&display=swap" rel="stylesheet">
      <link rel="stylesheet" href="bootstrap-4.5.0-dist/css/bootstrap.min.css">
      <link href="style.css" rel="stylesheet">
      <link href="https://cdn.materialdesignicons.com/4.8.95/css/materialdesignicons.min.css" rel="stylesheet">
      <link rel="stylesheet" href="iziToast-master/dist/css/iziToast.min.css">
      <link rel="stylesheet" href="/assets/css/pidie.css">
</head>
<body>

    <div class="container">

        <div class="row">

            <!-- first column -->
            <div class="col-sm-12 col-lg-6 d-none d-md-block mt-5">
              <img src="img/transfer.svg" class="img-fluid mt-5" alt="login" />
            </div>



            <!-- second column -->
          <div class="col-sm-12 col-lg-6">
            
            <div style="margin-top: 40px;" class="text-center">
              <img src="img/PayNaija.png" class="" alt="logo" width="100" height="50" />
            </div>

              <div class="text-center">
                <h6 style="font-size: 20px;" class="mt-4">Borderless payment with ease.</h6>
              </div>

          <form id="register" style="width: 80%; margin: auto;">
  
              <div class="form-group mt-4">
                <label for="email">Email address</label>
                <input type="email" class="form-control" id="email" required>
              </div>

               <div class="form-group">
                <label for="fullname">Full Name</label>
                <input type="text" class="form-control" id="fullname" required>
              </div>

              <div class="form-group">
                <label for="country">Country of residence</label>
                <select class="form-control" id="country">
 <option value="Algeria">Algeria</option>
 <option value="Angola">Angola</option>
 <option value="Benin">Benin</option>
 <option value="Botswana">Botswana</option>
 <option value="Burkina Faso">Burkina Faso</option>
 <option value="Burundi">Burundi</option>
 <option value="Cabo Verde">Cabo Verde</option>
 <option value="Cameroon">Cameroon</option>
 <option value="Central African Republic (the)">Central African Republic (the)</option>
 <option value="Chad">Chad</option><option value="Comoros ">Comoros </option>
 <option value="Congo">Congo</option>
 <option value="Congo (the)">Congo (the)</option>
 <option value="Côte d'ivoire">Côte d'Ivoire</option>
 <option value="Djibouti">Djibouti</option>
 <option value="Egypt">Egypt</option>
 <option value="Equatorial Guinea">Equatorial Guinea</option>
 <option value="Eritrea">Eritrea</option>
 <option value="Ethiopia">Ethiopia</option>
 <option value="Gabon">Gabon</option>
 <option value="Gambia ">Gambia </option>
 <option value="Ghana">Ghana</option>
 <option value="Guinea">Guinea</option>
 <option value="Guinea-Bissau">Guinea-Bissau</option>
 <option value="Kenya">Kenya</option>
 <option value="Lesotho">Lesotho</option>
 <option value="Liberia">Liberia</option>
 <option value="Libya">Libya</option>
 <option value="Madagascar">Madagascar</option>
 <option value="Malawi">Malawi</option>
 <option value="Mali">Mali</option>
 <option value="Mauritania">Mauritania</option>
 <option value="Mauritius">Mauritius</option>
 <option value="Mayotte">Mayotte</option>
 <option value="Morocco">Morocco</option>
 <option value="Mozambique">Mozambique</option>
 <option value="Namibia">Namibia</option>
 <option value="Niger (the)">Niger (the)</option>
 <option value="Nigeria">Nigeria</option>
 <option value="Réunion">Réunion</option>
 <option value="Rwanda">Rwanda</option>
 <option value="Saint Helena, Ascension and Tristan da Cunha">Saint Helena, Ascension and Tristan da Cunha</option>
 <option value="Sao Tome and Principe">Sao Tome and Principe</option>
 <option value="Senegal">Senegal</option>
 <option value="Seychelles">Seychelles</option>
 <option value="Sierra Leone">Sierra Leone</option>
 <option value="Somalia">Somalia</option>
 <option value="South Africa">South Africa</option>
 <option value="South Sudan">South Sudan</option>
 <option value="Sudan ">Sudan </option>
 <option value="Swaziland">Swaziland</option>
 <option value="Tanzania, United Republic of">Tanzania, United Republic of</option>
 <option value="Togo">Togo</option><option value="Tunisia">Tunisia</option>
 <option value="Uganda">Uganda</option><option value="Western Sahara*">Western Sahara*</option>
 <option value="Zambia">Zambia</option>
 <option value="Zimbabwe">Zimbabwe</option>
 <option value="Antarctica">Antarctica</option>
 <option value="Bouvet Island">Bouvet Island</option>
 <option value="French Southern Territories (the)">French Southern Territories (the)</option>
 <option value="Heard Island and McDonald Islands">Heard Island and McDonald Islands</option>
 <option value="South Georgia and the South Sandwich Islands">South Georgia and the South Sandwich Islands</option>
 <option value="Afghanistan">Afghanistan</option><option value="Armenia">Armenia</option>
 <option value="Azerbaijan">Azerbaijan</option><option value="Bangladesh">Bangladesh</option>
 <option value="Bhutan">Bhutan</option>
 <option value="British Indian Ocean Territory (the)">British Indian Ocean Territory (the)</option>
 <option value="Brunei Darussalam">Brunei Darussalam</option><option value="Cambodia">Cambodia</option>
 <option value="China">China</option><option value="Georgia">Georgia</option><option value="Hong Kong">Hong Kong</option>
 <option value="India">India</option><option value="Indonesia">Indonesia</option><option value="Japan">Japan</option>
 <option value="Kazakhstan">Kazakhstan</option>
 <option value="Korea">Korea (the Republic of)</option>
 <option value="Kyrgyzstan">Kyrgyzstan</option>
 <option value="Lao People">Lao People's Democratic Republic (the)</option>
 <option value="Macao">Macao</option><option value="Malaysia">Malaysia</option><option value="Maldives">Maldives</option>
 <option value="Mongolia">Mongolia</option><option value="Myanmar">Myanmar</option><option value="Nepal">Nepal</option>
 <option value="Pakistan">Pakistan</option><option value="Philippine">Philippines</option>
 <option value="Singapore">Singapore</option><option value="Sri Lanka">Sri Lanka</option>
 <option value="Vietnam">Vietnam</option><option value="Taiwan (Province of China)">Taiwan (Province of China)</option>
 <option value="Belize">Belize</option><option value="Tajikistan">Tajikistan</option>
 <option value="Thailand">Thailand</option><option value="Timor-Leste">Timor-Leste</option>
 <option value="Turkmenistan">Turkmenistan</option>
 <option value="Uzbekistan">Uzbekistan</option>
                </select>
              </div>

              <div class="form-group">
                <label for="phone">Phone Number</label>
                <div class="pd-telephone-input" style="margin: 0px">
                  <input type="tel" class="form-control" id="phone">
                </div>
              </div>

              

              <div class="form-group">
                <label for="password">Password</label>
                <div class="input-group mb-2" id="show_hide_password">
                    <input type="password" class="form-control" id="password">
                    <div class="input-group-prepend">
                        <div class="input-group-text">
                            <a href=""><i class="fa fa-eye-slash" aria-hidden="true"></i></a>
                        </div>
                      </div>
                  </div>
            </div>

            <div class="form-group">
              <label for="confirmPassword">Confirm Password</label>
              <div class="input-group mb-2" id="show_confirm_password">
                  <input type="password" class="form-control" id="confirmPassword">
                  <div class="input-group-prepend">
                      <div class="input-group-text">
                          <a href=""><i class="fa fa-eye-slash" aria-hidden="true"></i></a>
                      </div>
                    </div>
                </div>
                <span id="passwordField" class="error">Password doesn't match!!!</span>
          </div>

             
            
            <button type="submit" class="btn btn-primary mt-2" style="width: 100%;" id="signUp" >Sign Up <span id="spinner"></span></button>
              
          </form>


          <div class="text-center mt-4">
          <p>Already have an account? <a href="index.html" style="text-decoration: none;" class="icon-color">Login</a></p>
          </div>

          </div>

        </div>


      </div>



  
    




<script src="dist/jquery.min.js"></script>
<script src="bootstrap-4.5.0-dist/js/bootstrap.min.js"></script>
<script src="lib/viewdata.js"></script>
<script src="lib/jquery.cookie.js"></script>
<script src="https://kit.fontawesome.com/d54c227c34.js"></script>
 <!-- Forms Validations Plugin -->
 <script src="/assets/js/plugins/jquery.validate.min.js"></script>
 <script src="iziToast-master/dist/js/iziToast.min.js"></script>
 <script src="assets/js/pidie.js"></script>

  <script>
    $(document).ready(function(){

      new Pidie();

      

      // password toggle
      $("#show_hide_password a").on('click', function(event) {
             event.preventDefault();
        if($('#show_hide_password input').attr("type") == "text"){
            $('#show_hide_password input').attr('type', 'password');
            $('#show_hide_password i').addClass( "fa-eye-slash" );
            $('#show_hide_password i').removeClass( "fa-eye" );
        }else if($('#show_hide_password input').attr("type") == "password"){
            $('#show_hide_password input').attr('type', 'text');
            $('#show_hide_password i').removeClass( "fa-eye-slash" );
            $('#show_hide_password i').addClass( "fa-eye" );
        }
    });

    // confirm password toggle
    $("#show_confirm_password a").on('click', function(event) {
             event.preventDefault();
        if($('#show_confirm_password input').attr("type") == "text"){
            $('#show_confirm_password input').attr('type', 'password');
            $('#show_confirm_password i').addClass( "fa-eye-slash" );
            $('#show_confirm_password i').removeClass( "fa-eye" );
        }else if($('#show_confirm_password input').attr("type") == "password"){
            $('#show_confirm_password input').attr('type', 'text');
            $('#show_confirm_password i').removeClass( "fa-eye-slash" );
            $('#show_confirm_password i').addClass( "fa-eye" );
        }
    });



          //validate amount
              $('#confirmPassword').on('input', function() {
                  var err_msg = $("#passwordField");
                    err_msg.removeClass("error_show").addClass("error")
                });


      // on form submit
        $("form").submit(function(event) {
            event.preventDefault()
           var view_data = new ViewData();
          var signup_function = "member";
            var url = view_data.ControllerRouteURL + signup_function;

          var email = $("#email").val();
          var phone = $("#phone").val();
          var country = $('select#country option:selected').val();
          var password = $("#password").val();
          var fullname = $('#fullname').val();
          var confirmPassword = $('#confirmPassword').val();
          var error_msg = $('#passwordField');

          if(password !== confirmPassword){
            error_msg.removeClass("error").addClass("error_show")  
          }
          else{

            var data = {
              email: email,
              fullName: fullname,
              password: password,
              country: country,
              phoneNo: phone
            }

            error_msg.removeClass("error_show").addClass("error")

            
          $.ajax({
                type: 'POST',
                data: JSON.stringify(data),
                url: url,
                contentType: "application/json; charset=utf-8",
                dataType: 'json',
              beforeSend: function(jqXHR, settings) {
                  $('#spinner').addClass("fa fa-circle-o-notch fa-spin");
                  $('#signUp').attr('disabled', true)
              },
              success: function(data) {
                console.log(data)
                iziToast.success({
                    message: 'Registration Successful, Login to continue',
                    progressBar: false,
                    position: 'topRight'
                });

                $("#email").val('');
                $("#phone").val('');
                $("#fullname").val('');
                $("#password").val('');

              },
              error: function(data){
                  $('#spinner').removeClass("fa fa-circle-o-notch fa-spin");  
                  iziToast.error({
                    message: 'User with this email already exist.',
                    progressBar: false,
                    position: 'topRight'
                });
                $('#signUp').attr('disabled', false)

              },
              complete: function(jqXHR) {
                  if (jqXHR.status != '200') {
                      var obj = $.parseJSON(jqXHR.responseText);
                  }
                  $('#spinner').removeClass("fa fa-circle-o-notch fa-spin");
                  $('#signUp').attr('disabled', false)
              }
          })

          }

        })
         


    })  
  </script>  
</body>
</html>